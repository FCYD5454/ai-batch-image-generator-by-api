# 重構過程中的工具問題記錄

## 日期: 2024-05-22

## 問題描述

在對 `backend/services/` 目錄下的多個服務檔案進行重構，以移除重複的 `save_generated_image` 函式時，`edit_file` 工具的行為出現不一致。

具體來說，在處理 `openai_service.py` 和 `gemini_service.py` 時，多次嘗試都未能成功刪除舊的函式區塊，僅能添加 `import` 語句。最終需要使用完整的檔案內容進行覆蓋操作才得以成功。

在處理 `adobe_firefly.py` 時，即使是覆蓋操作也連續失敗，導致我不得不暫時跳過該檔案的最終清理。

## 影響

- 降低了自動化重構的效率和可靠性。
- `backend/services/adobe_firefly.py` 中可能仍然存在未被使用的 `import` 語句和重複的函式定義，構成輕微的技術債。

## 潛在原因

- 模型在理解 "delete a block of code" 的指令時可能存在歧義。
- 檔案的特定內容或結構可能干擾了模型的編輯邏輯。
- 工具本身可能存在間歇性的 Bug。

## 後續建議

- 如此類問題再次出現，應優先採用全檔案覆蓋的策略。
- 如果覆蓋策略也失敗，應記錄問題、暫時跳過，並在完成主要任務後回報此技術障礙。 